---
title: linux、centOS虚拟机出现entering emergency mode解决方案
date: 2022-12-19 12:52:55
permalink: /pages/48b1b4/
categories:
  - Blog-Linux
tags:
  -
author:
  name: leopisces
  link: https://github.com/Leopisces
---

## 1、centos 打开之后出现这个问题，迟迟打不开

![在这里插入图片描述](https://img-blog.csdnimg.cn/8b8cbd6245f44a7da4a7db43edc3ed7d.png)  
按他的操作输入 journalctl 之后输入 shift+g 到日志最后查看报错发现是 xfs（dm-0 有问题）  
![在这里插入图片描述](https://img-blog.csdnimg.cn/176eb77da66b4f9ca134fbfd5040b4e3.png)  
![在这里插入图片描述](https://img-blog.csdnimg.cn/0482693fdb254c88b7b18908de30ed95.png)  
输入 xfs_repair -v -L /dev/dm-0 因此修复 /dev/dm-0 就可以了

```
`xfs_repair /dev/dm-0`

*   1


```

-L 选项指定强制日志清零，强制 xfs_repair 将日志归零，即使它包含脏数据（[元数据](https://so.csdn.net/so/search?q=%E5%85%83%E6%95%B0%E6%8D%AE&spm=1001.2101.3001.7020)更改）。  
#重启[虚拟机](https://so.csdn.net/so/search?q=%E8%99%9A%E6%8B%9F%E6%9C%BA&spm=1001.2101.3001.7020)，解决问题  
reboot

![在这里插入图片描述](https://img-blog.csdnimg.cn/de2d3675a816429d9c85fc974d5d17f2.png)

## 2、虚拟机出现 entering emergency mode 使用 xfs_rapair 出现 Device or resource busy 解决方案

当你输入输入 xfs_repair -v -L /dev/你报错的磁盘还没有解决问题的时候，可能是正在繁忙 Device or resource busy  
虚拟机出现 entering emergency mode，使用 xfs_rapair 出现`Device or resource busy`解决

```
`xfs_repair： cannot open /dev/dm-0: Device or resource busy`

*   1


```

然后我又仔细看报错提示，看到了关键一条信息

```
`[ 3.852991] XFS (dm-0): Unmount and run xfs_repair`

*   1


```

系统提示我，需要先 umount，再执行 xfs_repair 命令  
所以，需要先 umount，但是没有提示需要 umount 什么东西，dm-0 是 centos-root 的软连接，所以

```
`umount /dev/mapper/centos-root
xfs_repair -v -L /dev/mapper/centos-root
reboot`

*   1
*   2
*   3


```

系统恢复了  
![在这里插入图片描述](https://img-blog.csdnimg.cn/f5a769f6617c484b851862c42dac48c8.png)
